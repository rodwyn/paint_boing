<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<title>Paint Boing</title>
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/elastislide.css" />
		<noscript>
			<style>
				.es-carousel ul {
					display: block;
				}
			</style>
		</noscript>
	</head>
	<body>
		<section id="contenedor" style="margin:0 auto 0 auto;width:100%; max-width: 1024px;  border: #FF0000 solid thin;">
			<div id="rg-gallery" class="rg-gallery">

				<div class="rg-thumbs">
					<!-- Elastislide Carousel Thumbnail Viewer -->
					<div class="es-carousel-wrapper">
						<div class="es-nav">
							<span class="es-nav-prev">Previous</span>
							<span class="es-nav-next">Next</span>
						</div>
						<div class="es-carousel">
							<ul>
								<li>
									<a href="#" ><img class="im" src="images/thumbs/TD1.png" data-large="images/D1.jpg" alt="image01" data-description="From off a hill whose concave womb reworded" /></a>
								</li>
								<li>
									<a href="#" ><img class="im" src="images/thumbs/TD2.png" data-large="images/D2.jpg" alt="image02" data-description="A plaintful story from a sistering vale" /></a>
								</li>
								<li>
									<a href="#" ><img class="im" src="images/thumbs/TD3.png" data-large="images/D3.jpg" alt="image03" data-description="A plaintful story from a sistering vale" /></a>
								</li>
								<li>
									<a href="#" ><img class="im" src="images/thumbs/TD4.png" data-large="images/D4.jpg" alt="image04" data-description="My spirits to attend this double voice accorded" /></a>
								</li>

							</ul>
						</div>
					</div>
					<!-- End Elastislide Carousel Thumbnail Viewer -->
				</div><!-- rg-thumbs -->
				<canvas id="lienzo" style="width: 100%; height: 500px;" ></canvas>
				<div class="es-carousel-wrapper">
					<div class="es-carousel">
						<ul>
							<li style="background: #333333; height: 69px;"></li>
							<li style="background: #FF2100; height: 69px;"></li>
							<li style="background: #35B36C; height: 69px;"></li>
							<li style="background: #87601C; height: 69px;"></li>
							<li style="background: #00ABE4; height: 69px;"></li>
							<li style="background: #FF9900; height: 69px;"></li>
							<li style="background: #FFFF00; height: 69px;"></li>
							<li style="background: #FF69B4; height: 69px;"></li>
							<li style="background: #9B30FF; height: 69px;"></li>
						</ul>
					</div>
				</div>
			</div><!-- rg-gallery -->
		</section>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.tmpl.min.js"></script>
		<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
		<script type="text/javascript" src="js/jquery.elastislide.js"></script>
		<!--<script type="text/javascript" src="js/canvas.js"></script>-->
		<script type="text/javascript" src="js/gallery.js"></script>
		<script>
			$(function() {
				//obtenemos el contexto
				var elCanvas = $("canvas")[0];
				var contexto = elCanvas.getContext("2d");
				//crear un objeto imagen
				var imagen = new Image();

				//modificar su atributo src
				imagen.src = "images/D1.jpg";
				//cargar la imagen en el canvas
				imagen.onload = function() {
					contexto.drawImage(imagen, 0, 0, 400, 500);
				};

				$("#link-guardar").click(function(evento) {
					//obtengo la imagen del canvas
					var txt = $("#nombre").val();
					var sel = $("#mensaje").val();
					if (txt != "") {
						if (sel != 0) {
							var meme = elCanvas.toDataURL();
							//obtengo el anchor
							var enlace = evento.target;
							enlace.href = meme;
							enlace.download = "mi_tarjeta.jpg";
						} else {
							alert("Selecciona un mensaje para tu amigo.");
						}
					} else {
						alert("Escribe el nombre de tu amigo");
					}
				});

				$(".im").click(function(evento) {
					//alert("cambiar imagen")
					var i = $(this).attr("data-large");
					imagen.src = i;
					contexto.drawImage(imagen, 0, 0, 400, 500);
				});

			});
		</script>
	</body>
</html>
